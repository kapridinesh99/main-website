{"ast":null,"code":"var _jsxFileName = \"/Users/sleepycat/main-website/src/Components/User/BasicDetails.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { EachField, getCredentials, getUserId } from '../../Functions/util';\nimport Loader from '../Loader';\nimport './User.css';\nimport { useMutation } from 'react-query';\nimport { editUserProfile } from '../../Functions/user';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const editableFields = ['first_name', 'last_name'];\nexport const blackListedFields = ['referral_code_used', 'balance', 'user_own_referral_code', 'initial_investment'];\nfunction BasicDetails({\n  userProfileData,\n  isLoading\n}) {\n  _s();\n  var _formState$formData;\n  const [formState, setFormState] = useState({\n    isEditable: false,\n    formData: {}\n  });\n  const editUserProfileMutation = useMutation(editUserProfile);\n  const {\n    isLoading: _isLoading\n  } = editUserProfileMutation;\n  useEffect(() => {\n    setFormState(prevState => ({\n      ...prevState,\n      formData: {\n        ...userProfileData\n      }\n    }));\n  }, [userProfileData]);\n  const handleEditField = ({\n    e,\n    key,\n    value\n  }) => {\n    setFormState(prevState => ({\n      ...prevState,\n      formData: {\n        ...prevState.formData,\n        [key]: value\n      }\n    }));\n  };\n  const saveDetails = () => {\n    const {\n      userID\n    } = getCredentials();\n    const payload = {\n      userID,\n      ...formState.formData\n    };\n    editUserProfileMutation.mutate({\n      payload\n    }, {\n      onSuccess: ({\n        result\n      }) => {\n        setFormState(prevState => ({\n          ...prevState,\n          isEditable: false\n        }));\n      }\n    });\n  };\n  const enableEdit = () => {\n    setFormState(prevState => ({\n      ...prevState,\n      formData: userProfileData,\n      isEditable: !prevState.isEditable\n    }));\n  };\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"flex column gap-l\",\n    children: [isLoading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }, this) : Object.entries((_formState$formData = formState.formData) !== null && _formState$formData !== void 0 ? _formState$formData : {}).map((entry, index) => entry && /*#__PURE__*/_jsxDEV(EachField, {\n      entry,\n      editableFields,\n      blackListedFields,\n      onChange: handleEditField,\n      isEditable: formState.isEditable\n    }, index, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex align-center space-between\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"edit-btn\",\n        onClick: enableEdit,\n        children: formState.isEditable ? 'Revert' : 'Edit'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), _isLoading ? /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }, this) : formState.isEditable && /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"save-btn\",\n        onClick: saveDetails,\n        children: \"Save\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 38\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(BasicDetails, \"5Mb0F4mWEyW96I0dytuvusaEMCo=\", false, function () {\n  return [useMutation];\n});\n_c = BasicDetails;\nexport default BasicDetails;\nvar _c;\n$RefreshReg$(_c, \"BasicDetails\");","map":{"version":3,"names":["useEffect","useState","EachField","getCredentials","getUserId","Loader","useMutation","editUserProfile","jsxDEV","_jsxDEV","editableFields","blackListedFields","BasicDetails","userProfileData","isLoading","_s","_formState$formData","formState","setFormState","isEditable","formData","editUserProfileMutation","_isLoading","prevState","handleEditField","e","key","value","saveDetails","userID","payload","mutate","onSuccess","result","enableEdit","className","children","fileName","_jsxFileName","lineNumber","columnNumber","Object","entries","map","entry","index","onChange","onClick","type","_c","$RefreshReg$"],"sources":["/Users/sleepycat/main-website/src/Components/User/BasicDetails.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { EachField, getCredentials, getUserId } from '../../Functions/util';\nimport Loader from '../Loader';\nimport './User.css';\nimport { useMutation } from 'react-query';\nimport { editUserProfile } from '../../Functions/user';\n\nexport const editableFields = ['first_name', 'last_name'];\nexport const blackListedFields = ['referral_code_used', 'balance', 'user_own_referral_code', 'initial_investment'];\n\nfunction BasicDetails({ userProfileData, isLoading }) {\n  const [formState, setFormState] = useState({\n    isEditable: false,\n    formData: {},\n  });\n\n  const editUserProfileMutation = useMutation(editUserProfile);\n  const { isLoading: _isLoading } = editUserProfileMutation;\n  \n  useEffect(() => {\n    setFormState((prevState) => ({\n      ...prevState,\n      formData: {...userProfileData},\n    }));\n  }, [userProfileData]);\n\n  const handleEditField = ({ e, key, value }) => {\n    setFormState((prevState) => ({\n      ...prevState,\n      formData: {\n        ...prevState.formData,\n        [key]: value,\n      },\n    }));\n  };\n\n  const saveDetails = () => {\n    const {userID} = getCredentials();\n    const payload = {\n      userID,\n      ...formState.formData,\n    };\n    editUserProfileMutation.mutate(({ payload }), {\n      onSuccess: ({ result }) => {\n        setFormState((prevState) => ({\n          ...prevState,\n          isEditable: false,\n        }));\n      }\n    });\n  };\n\n  const enableEdit = () => {\n    setFormState(prevState => ({\n      ...prevState,\n      formData: userProfileData,\n      isEditable: !prevState.isEditable,\n    }));\n  };\n\n  return (\n    <article className='flex column gap-l'>\n      { isLoading\n        ? <Loader />\n        : Object.entries(formState.formData ?? {})\n          .map((entry, index) => (entry &&\n            <EachField\n              key={index}\n              {...{\n                entry,\n                editableFields,\n                blackListedFields,\n                onChange: handleEditField,\n                isEditable: formState.isEditable\n              }} />\n          )) }\n      <br />\n      <div className='flex align-center space-between'>\n        <button className='edit-btn' onClick={enableEdit}>{formState.isEditable ? 'Revert' : 'Edit'}</button>\n        {  _isLoading \n          ? <Loader /> \n          : formState.isEditable && (<button type='submit' className='save-btn' onClick={saveDetails}>Save</button>) \n        }\n        \n      \n      </div>\n    </article>\n  )\n}\n\nexport default BasicDetails"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}